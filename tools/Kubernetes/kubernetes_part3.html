<html><h2><u><center>Kubernetes Part 3</center></u></h2>
<h4><pre>
<h3><u>Labels and Selectors</u></h3>
-> Labels are the mechanism you use to organize Kubernetes objects.
-> A label is a key-value pair, without any predefined meaning that can be attached to the objects.
-> Labels are similar to tags in AWS or git where you use a name to quick reference.
-> So you are free to choose labels as you need it to refer an environment which is used for dev, testing or production, refer a product group like Department A, Department B.
-> Multiple labels can be added to a single object.

<u>Label - Selectors</u>
-> Unlike name/UIDs, labels do not provide uniqueness, as in general, we can expect many objects to carry the same level.
-> Once labels are attached to an object we would need filters to narrow down and these are called as label selectors.
-> The api currently supports two types of selectors - Equality based and set based.
-> A label selector selector can be made of multiple requirements which are comma-separated.
Equality based: (=,!=)
name: bhupinder
class: nodes
project: development

set based: (in, notin and exists)
env in (production, development)
env notin (team1, team2)

-> Kubernetes also supports set-based selectors i.e. match multiple values
kubectl get pods -l 'env in (development, testing)'
kubectl get pods -l 'env notin (development, testing)'
kubectl get pods -l class=pods,myname=bhupinder 
kubectl delete pods -l 'env in (development,testing)'

<u>Node - Selector</u>
-> One use case for selecting labels is to constrain the set of nodes onto which a pod can schedule i.e. you can tell a pod to only be able to run on particular nodes.
-> Generally such constraints are unnecessary, as the scheduler will automatically do a reasonable placement, but on certain circumstances we might need it.
-> We can use labels to tag nodes.
-> You the nodes are tagged, you can use the label selectors to specify the pods run only of specific nodes.
-> First we give label to the node
-> Then use node selector to the pod configuration.  

<u>Scaling and Replication</u>
-> Kubernetes was designed to orchestrate multiple containers and replication.
-> Need for multiple containers/replication helps us with these - 

Reliability - By having multiple versions of an application, you prevent problems if one or more fails.
Load Balancing - Having multiple versions of a containers enables you to easily send traffic to different instances to prevent overloading of a single instances or node.
Scaling - When load does become too much for the number of existing instances, Kubernetes enables you to easily scale up your application, adding additional instances as needed.
Rolling Updates - Updates to a service by replacing pods one by one.  

<u>Replication Controller</u>
-> A replication controller is a object that enables you to easily create multiple pods, then make sure that number of pods always exist.
-> If a pod created using RC will be automatically replaced if they does crash, failed or terminated.
-> RC is recommended if you just want to make sure 1 pod is always running, even after system reboots.
-> You can run the RC with 1 replica and the RC will make sure the pod is always running.

kind: ReplicationController   -> this define to create the object of replication type              
apiVersion: v1
metadata:
  name: myreplica
spec:
  replicas: 2            -> this element defines the desired number of pods 
  selector:        -> tells the controller which pods to watch/belong to this RC
    myname: bhupinder  -> this must match the labels                            
  template:                -> template element defines a template to launch a new pod
    metadata:
      name: testpod6
      labels:            -> selectors values need to match the labels values specified in the pod template
        myname: bhupinder
    spec:
     containers:
       - name: c00
         image: ubuntu
         command: ["/bin/bash", "-c", "while true; do echo Hello-Bhupinder; sleep 5 ; done"]

<u>Replica Set</u>
-> Replica Set is a next generation replication controller.
-> The replication controller only supports equality-based selector whereas the replica set supports set-based selector i.e. filtering according to set of values.
-> Replica set rather than the replication controller is used by other objects like deployment. 
</h4>
</pre></html>  