<html><h2><center><u>Dockerfile and it's components</u></center></h2>
<pre><h4>
<h2><u>Dockerfile -</u></h2>
-> Dockerfile is basically a text file which contains a series of commands or instructions.
-> These instructions are executed in the order in which they are written.
-> Execution of these instructions takes place on a base image.
-> On building the Dockerfile, the successive actions form a new image from the base parent image.
-> Automation of Docker image creation.

<h2><u>Docker Components -</u></h2>
<u>FROM</u> -> For base image. This command must be on top of the dockerfile.

<u>RUN</u> -> To execute commands, it will create a layer in image.

<u>MAINTAINER</u> -> Author/ Owner/ Description

<u>COPY</u> -> It lets you Copy files from local system (docker VM) to Docker image itself. We need to provide source, destination (we can't download files from internet and any remote repo). [Note 1]
			  
<u>ADD</u> -> Simlar to COPY but, it provides a feature to download files from internet i.e. you can use URL instead of a local file/ directory, and also extract tar file from the source directly into the destination. [Note 1]

<u>EXPOSE</u> -> The EXPOSE instruction expose a port, the protocol can be UDP or TCP associated with the indicated port, default is TCP with no specification. The EXPOSE 
                 won't be able to map the ports on the host machine. Regardless of the EXPOSE settings, EXPOSE port can be override using -p flag while staring the container.
                 To expose ports such as 8080 for tomcat, port 80 for nginx etc.

<u>CMD</u> -> Execute commands but during container creation.

<u>ENTRYPOINT</u> -> Similar to CMD, but has higher priority over CMD, first commands will be executed by ENTRYPOINT only. The ENTRYPOINT instruction make your container run as an executable.
	      ENTRYPOINT can be configured in two forms:
	      1. Exec Form - 
                 ENTRYPOINT ["executable", "param1", "param2"]
              2. Shell Form -
                 ENTRYPOINT command param1 param2

<u>ENV</u> - The ENV instruction in Dockerfile sets the environmental variables for your container when you start. The default value can be overridden by passing --env <key>=<value>
             when you start the container.

<u>WORKDIR</u> - The WORKDIR directive in dockerfile defines the working directory for the rest of the instructions in the Dockerfile. The WORKDIR instruction won't create a
          new layer in the image but will add metadata to the image config. If the WORKDIR doesn't exist, it will be created even if it's not used in any subsequent
          Dockerfile instruction. You can have multiple WORKDIR in same Dockerfile. If a relative path is provided, it will be relative to the previous WORKDIR 
          instruction. If no WORKDIR is specified in the Dockerfile then the default path is /. The WORKDIR instruction can resolve environment variables previously
          set in Dockerfile using ENV.  

Note:
1. COPY and ADD are both Dockerfile instructions that serve similar purposes. They let you copy files from specific location into a Docker image.
2. You can name your stages, by adding an AS to the FROM instruction. By default, the stages are not named, and you can refer to them by their integer number , starting with 0 
   for the first FROM instruction. You are not limited to copying from stages you created earlier in your Dockerfile, you can use the COPY --from instruction to copy from a 
   separate image, either using the local image name, a tag available locally or on a Docker registry.
3. If you mention two entrypoint in the dockerfile, the second one will get executed and the first one will get ignored.
4. If an image has an entrypoint and if you pass an argument in it, while running container it won't override the existing ENTRYPOINT you should use --entrypoint flag when running container. 

<h2><u>Example of the Dockerfile</u></h2>
FROM ubuntu
ENV DEBIAN_FRONTEND=noninteractive
MAINTAINER sidd sidd@gmail.com
RUN apt-get update
RUN apt-get -y install apache2
RUN echo "Hello Apache server on ubuntu Docker" > /var/www/html/index.html
EXPOSE 80
CMD /usr/sbin/apache2ctl -D FOREGROUND
</h4></pre>
</html>
